
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="index.html">
      
      
        <link rel="next" href="yamtl.html">
      
      
      <link rel="icon" href="assets/site-files/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.5">
    
    
      
        <title>ETL - MDE Docs</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.6a10b989.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.scss">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#etl" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="MDE Docs" class="md-header__button md-logo" aria-label="MDE Docs" data-md-component="logo">
      
  <img src="assets/site-files/mde-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MDE Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ETL
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="MDE Docs" class="md-nav__button md-logo" aria-label="MDE Docs" data-md-component="logo">
      
  <img src="assets/site-files/mde-logo.png" alt="logo">

    </a>
    MDE Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Transformation Languages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Model Transformation Languages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ETL
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="etl.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ETL
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project-structure" class="md-nav__link">
    Project Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#etl-basics" class="md-nav__link">
    ETL Basics
  </a>
  
    <nav class="md-nav" aria-label="ETL Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#abstract-syntax" class="md-nav__link">
    Abstract Syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concrete-syntax" class="md-nav__link">
    Concrete Syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-semantics" class="md-nav__link">
    Execution Semantics
  </a>
  
    <nav class="md-nav" aria-label="Execution Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-and-block-overriding" class="md-nav__link">
    Rule and Block Overriding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-scheduling" class="md-nav__link">
    Execution Scheduling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source-element-resolution" class="md-nav__link">
    Source Element Resolution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etl-override-on-eol-special-assignment-operator" class="md-nav__link">
    ETL override on EOL Special Assignment Operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-transformations" class="md-nav__link">
    Interactive Transformations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="yamtl.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YAMTL
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="examples/linked-list-reversal-example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linked List Reversal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="examples/flowchart-to-html-example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flowchart to HTML
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exercises
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Exercises
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="exercises/flowchart-to-html-worksheet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flowchart to HTML
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project-structure" class="md-nav__link">
    Project Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#etl-basics" class="md-nav__link">
    ETL Basics
  </a>
  
    <nav class="md-nav" aria-label="ETL Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#abstract-syntax" class="md-nav__link">
    Abstract Syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concrete-syntax" class="md-nav__link">
    Concrete Syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-semantics" class="md-nav__link">
    Execution Semantics
  </a>
  
    <nav class="md-nav" aria-label="Execution Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-and-block-overriding" class="md-nav__link">
    Rule and Block Overriding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-scheduling" class="md-nav__link">
    Execution Scheduling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source-element-resolution" class="md-nav__link">
    Source Element Resolution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etl-override-on-eol-special-assignment-operator" class="md-nav__link">
    ETL override on EOL Special Assignment Operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-transformations" class="md-nav__link">
    Interactive Transformations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="etl">ETL</h1>
<p>Epsilon's core is the general purpose model management language called Epsilon Object Language (EOL). EOL is meant to be reused in task specific languages. One such language is Epsilon Transformation Language (ETL) which is used to perform model-to-model transformations. ETL is a hybrid of declarative and imperative paradigms. It provides abstract rule-based execution of tasks as well as imperative EOL features to handle various transformation needs. ETL can be used to transform an arbitrary number of input models into a arbitrary number of output models of different modelling languages and technologies in a rule-based and modular manner.</p>
<h2 id="project-structure">Project Structure</h2>
<p>An ETL model-to-model transformation project (see image below) requires a source model, source metamodel, target metamodel, an ETL program that contains the rules and transformations between the source and target model, and a build file which loads all EMF models and runs the ETL program to generate the target model (an XMI file in this case).
<br/><br/></p>
<figure>
<p><img alt="ETL project structure in eclipse" src="assets/images/etl-project-structure.png" width="300" />
  </p>
<figcaption>File structure of an example ETL project</figcaption>
</figure>
<h2 id="installation">Installation</h2>
<p>To use ETL, you just need to install <a href="epsilon.html">Epsilon on Eclipse</a>.</p>
<h2 id="etl-basics">ETL Basics</h2>
<p>Before you get started on your own ETL project, let's introduce the basics of ETL through the syntax and semantics.</p>
<h3 id="abstract-syntax">Abstract Syntax</h3>
<figure>
<p><pre class="mermaid"><code>classDiagram
class TransformRule {
    -name: String
    -abstract: Boolean
    -lazy: Boolean
    -primary: Boolean
    -greedy: Boolean
    -type: EolModelElementType
    -guard: ExecutableBlock&lt;Boolean&gt;
    -body: ExecutableBlock&lt;Void&gt;
}
class Parameter {
    -name: String
    -type: EolType 
}
class NamedStatementBlockRule {
    -name: String
    -body: StatementBlock
}
EolModule &lt;|-- ErlModule
EtlModule --|&gt; ErlModule
Pre --|&gt; NamedStatementBlockRule
Post --|&gt; NamedStatementBlockRule
ErlModule -- Pre: pre *
ErlModule -- Post: post *
EtlModule -- TransformRule: rules *
TransformRule -- Parameter: source
TransformRule -- Parameter: targets *
TransformRule -- TransformRule: extends *</code></pre>
  </p>
<figcaption>ETL constructs and relationships</figcaption>
</figure>
<p>The figure above represents ETL at a high level. In ETL, modules represent the model transformations. <code>EtlModule</code> can have one or more transformation rules (<code>TransformRule</code>). </p>
<p>Each <code>TransformRule</code> provides a mapping between a <code>source</code> model parameter and <code>target</code> model parameter(s). It has some important characteristics:</p>
<ul>
<li>The name of a rule is <strong>unique</strong> within the context of a module.</li>
<li>Each rule has <strong>only one</strong> <code>source</code> parameter and can have <strong>one or more</strong> <code>target</code> parameters.</li>
<li>A transformation rule can <code>extend</code> other rules.</li>
<li>You can declare a rule as <code>abstract</code>, <code>primary</code> and/or <code>lazy</code> (explained in the next section).</li>
<li>An optional 'guard' selection statement can be defined to filter only certain elements (of specific attributes) that conform to the type of the <code>source</code> parameter.</li>
<li>Each rule has a <code>body</code>. This is a block of EOL statements where the logic for assigning field values of target model is imperatively defined.</li>
</ul>
<p>ETL also allows users to declare <code>pre</code> and <code>post</code> blocks which are executed before and after the transformation rules.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These <code>pre</code> and <code>post</code> blocks are different to the pre-/post-condition annotations available for EOL user-defined operations</p>
</div>
<h3 id="concrete-syntax">Concrete Syntax</h3>
<p>The basic format of an ETL document is as follows: </p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>rule &lt;name&gt;
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    transform &lt;sourceParameterName&gt;:&lt;sourceParameterType&gt;
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    to &lt;targetParameterName&gt;:&lt;targetParameterType&gt;
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>        (,&lt;targetParameterName&gt;:&lt;targetParameterType&gt;)* {
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    //Transformation rule body is comprised of EOL statement(s)
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    statement+
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>}
</span></code></pre></div>
<strong>Note:</strong> <em>&lt;&gt; is meant to show user-definable fields and is not part of the actual syntax</em></p>
<p>Name of a <code>rule</code> is uniquely identified within an ETL module and it can contain numbers from 0-9. All contents in a rule's scope are indented. <code>transform</code> statement requires the name and type of the <code>source</code> parameter. <code>to</code> statement requires the name and type of the <code>target</code> parameter. There can be multiple target parameters which are each separated using comma (,). Curly braces ({}) just after the <code>to</code> statement defines the scope of the rule's <code>body</code>. The body comprises of EOL statement(s) that can assign attribute values to <code>target</code> model elements.</p>
<p>ETL can also have optional attributes and statements that increase usability of the tool. The options are structured in the following manner:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>(@abstract)?
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>(@lazy)?
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>(@primary)?
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>rule &lt;name&gt;
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    transform &lt;sourceParameterName&gt;:&lt;sourceParameterType&gt;
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    to &lt;targetParameterName&gt;:&lt;targetParameterType&gt;
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        (,&lt;targetParameterName&gt;:&lt;targetParameterType&gt;)*
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    (extends &lt;ruleName&gt; (, &lt;ruleName&gt;*)? {
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    (guard (:expression)|({statementBlock}))?
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    statement+
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>}
</span></code></pre></div>
<p><strong>Note:</strong> <em>(option)? is meant to show optional fields and is not part of the actual syntax</em></p>
<p><code>@abstract</code>, <code>@lazy</code> and <code>@primary</code> optional attributes of a rule are defined on the line prior to the <code>rule</code> keyword. <code>@abstract</code> is used to declare rules that will be extended using the programming concept of inheritance. Rules declared as <code>@lazy</code> are executed after all the non-lazy rules have been executed. Results of the <code>equivalents()</code> operation can be prioritized (ordered) using rules that are declared<code>@primary</code>. Meaning, results of <em>primary</em> rules precede the results of all the other rules.</p>
<p>A rule can extend <strong>one or more</strong> rules using the <code>extends</code> keyword after the <code>to</code> statement. Multiple extended rules form a comma-separated list.</p>
<p>An optional <code>guard</code> is a type of filter or a selection statement which is declared in the curly braces ({}) that contains a rule's <code>body</code>. A simple <em>guard</em> is an EOL expression following a column (:) and a complex <em>guard</em> is a block of EOL statements enclosed in curly braces ({}).</p>
<p>Apart from rules, ETL also includes <code>pre</code> and <code>post</code> blocks of EOL statements. The syntax for them is the keyword identifier as <code>pre</code> or <code>post</code>, followed by an optional name and a set of EOL statements enclosed in curly braces ({}).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>(pre|post) &lt;name&gt; {
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    statement+
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>}
</span></code></pre></div>
<h3 id="execution-semantics">Execution Semantics</h3>
<h4 id="rule-and-block-overriding">Rule and Block Overriding</h4>
<p>Users can import other ETL modules within an ETL module. The importing ETL module (containing <code>import</code> keyword) inherits all the rules and pre/post blocks specified in the modules it imports (recursively).</p>
<p>If the importing module specifies a rule or pre/post block with the same name as one from the imported module, then the local rule/block is prioritised and it overrides the imported one.</p>
<h4 id="execution-scheduling">Execution Scheduling</h4>
<figure>
<p><pre class="mermaid"><code>graph LR
    A[pre block] --&gt; B[rules];
    B --&gt; C[post block];</code></pre>
  </p>
<figcaption>Flow of statement execution</figcaption>
</figure>
<p>When an ETL module is executed, the <code>pre</code> blocks are executed first. If there are multiple <code>pre</code> blocks, then they are executed sequentially in the order defined.</p>
<p>Next, each non-abstract and non-lazy <code>rule</code> is executed for all elements on which the rule is applicable. To be applicable to a particular element, the element must have a type-of relationship (<code>sourceParameter</code> fields must be filled) or a kind-of relationship (if the <code>rule</code> is annotated as <code>@greedy</code>). Additionally, the element must satisfy the <code>guard</code> of the rule (and all rules it extends). Then the <code>@abstract</code> and  <code>@lazy</code> rules are executed in order.</p>
<p>After all rules have been executed, the <code>post</code> blocks are executed in the order they have been specified.</p>
<h4 id="source-element-resolution">Source Element Resolution</h4>
<p>Resolving source elements is a common task in the execution of a rule and this has been automated by ETL. This also helps in reducing coupling between different rules and keeps the mappings between source and target elements clear. ETL contains <code>equivalent()</code> and <code>equivalents()</code> built-in operations that automatically resolve source elements to the corresponding target elements.</p>
<p><code>equivalents()</code> <em>operation:</em></p>
<p><code>equivalents()</code> operation has different behaviors when applied to a single source element or a collection of elements. When applied on a single element, the operation inspects the transformation trace (see figure below) and invokes applicable rules (if necessary) to calculate the target element. When the operation is applied on a collection, a <code>Bag</code> containing <code>Bag</code>s that contain the corresponding target elements of the original source elements is returned. Optionally, <code>equivalents()</code> operation can be invoked with several rule names as parameters to return equivalents created by specific rules. The execution of this operation also differs from the 'Execution Scheduling' discussed before, because <code>equivalents()</code> operation invokes both lazy and non-lazy rules.</p>
<p>The ordering of the <code>equivalents()</code> operations is sequential and runs in the order of the rules defined. However, this is not the case when a rule is declared <code>@primary</code> in which case the results of that rule will precede all of the other rules.</p>
<pre class="mermaid"><code>classDiagram

class Transformation {
    -source: Object
    -targets: Object[*]
}

class ITransformationStrategy {
    +transformModels(context : EtlContext)
}

EolContext &lt;|-- EtlContext
EtlContext -- TransformationTrace
EtlContext -- ITransformationStrategy: strategy
TransformationTrace -- Transformation: transformations *
Transformation -- TransformRule: rule</code></pre>
<p><code>equivalent()</code> <em>operation:</em></p>
<p>The <code>equivalent()</code> operation also has different behaviours when applied to a single source element or a collection. When the operation is applied to a single element only the first element of the result that would have been returned by the <code>equivalents()</code> operation is returned. When applied to a collection, the operation returns a flattened collection. Optionally, <code>equivalent()</code> operation can be invoked with or without parameters.</p>
<div class="admonition info">
<p class="admonition-title">Transformation trace persistance</p>
<p>ETL does not provide built-in support for persisting the transformation trace. If you want to access it, you can do so through <code>System.context.transformationTrace</code> and persists parts of the trace in a format of choice e.g. in a <code>post</code> block.</p>
</div>
<h4 id="etl-override-on-eol-special-assignment-operator">ETL override on EOL Special Assignment Operator</h4>
<p>Resolving equivalent(s) or source model elements is quite common in model transformation. However, the ETL syntax for equivalent(s) operations is verbose. So, to improve readability of transformation scripts, ETL overrides the semantics of the EOL <code>SpecialAssignmentStatement</code> (which is <code>::=</code> in concrete syntax) to set the field on the left-hand side to the <code>equivalent</code> of the element on the right-hand side as calculated using the <code>equivalent()</code> operation discussed above. This custom assignment behaviour is meant to simply replace the <code>equivalent()</code> method with <code>::=</code> instead. The snippets below show how its done (don't worry about the terminology, just compare the syntax).</p>
<p><em>Equivalent Operation Snippet:</em>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>edge.target = t.parent.equivalent();
</span></code></pre></div></p>
<p><em>Special Assignment Operator Snippet:</em>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>edge.target ::= t.parent;
</span></code></pre></div></p>
<h4 id="interactive-transformations">Interactive Transformations</h4>
<p>EOL statements can provide interactive capabilities for ETL transformations. In the example below, <code>Tree2Node</code> rule is modified by adding a <code>guard</code> statement that uses EOL's user-input method (<code>UserInput.confirm(String,Boolean)</code>) to ask for user's permission and confirmation of selecting specific Tree elements that need to be transformed to Node elements. The confirmation prompt appears at runtime hence making the model transformation interactive.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>rule Tree2Node
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    transform t : Tree!Tree
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    to n : Graph!Node {
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    guard : UserInput.confirm
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        (&quot;Transform tree &quot; + t.label + &quot;?&quot;, true)
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    n.label = t.label;
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    var target : Graph!Node ::= t.parent;
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>    if (target.isDefined()) {
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>        var edge = new Graph!Edge;
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>        edge.source = n;
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>        edge.target = target;
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>    }
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>}
</span></code></pre></div>
<h2 id="examples">Examples</h2>
<ul>
<li>
<p><a href="examples/linked-list-reversal-example.html">Linked list reversal</a> project reverses a linked list data structure originally stored in XMI format (source model). ETL transformation generates an <code>target.xmi</code> containing the target model. Both source and target metamodels are created using EMF.</p>
</li>
<li>
<p><a href="examples/flowchart-to-html-example.html">Flowchart to HTML</a> project is a culmination of small yet expressive transformation scripts that transform elements from a Flowchart model to HTML elements. Important and easily understandable demos on <code>@greedy</code>, <code>@lazy</code>, <code>@primary</code>, <code>equivalent()</code>, one source element to multiple targets, and inheritance concepts have been covered in this ETL project.</p>
</li>
</ul>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 13, 2023</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["content.code.copy", "content.tabs.link"], "search": "assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>